<link rel="import" href="../components/core-icons/core-icons.html">
<link rel="import" href="../components/core-icons/device-icons.html">
<link rel="import" href="../components/paper-fab/paper-fab.html">
<link rel="import" href="../components/paper-dialog/paper-dialog.html">
<link rel="import" href="../components/paper-toast/paper-toast.html">
<link rel="import" href="../components/core-ajax/core-ajax.html">
<link rel="import" href="../components/core-drag-drop/core-drag-drop.html">
<link rel="import" href="../components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="edit-page.html">

<polymer-element name="bluePrint-page"  on-drag='{{dragStart}}'  on-dragover="{{allowDrop}}" on-drop='{{dragStop}}' >



        <template >
            <core-ajax id="post" contentType="application/json" method="POST" url="/log" ></core-ajax>
            <script src="../javascripts/functions.js"></script>
            <link rel="stylesheet" type="text/css" href="../stylesheets/style.css">
            <figure id="blueprint-container" center layout  >

                <paper-fab mini icon="device:brightness-high" id="paper_fab2" class="btHome" on-tap={{tappato}} style="top: 25%;left: 25%" ></paper-fab>
                <!--<paper-fab mini icon="device:brightness-high" id="paper_fab3" class="btHome" on-tap={{tappato}} style="top: 48%;left: 15%" ></paper-fab>-->
                <!--<paper-fab mini icon="settings-remote" id="paper_fab4"  on-tap={{tappato2}} style="top: 45%;left: 49%"></paper-fab>-->
                <!--<paper-fab mini icon="device:brightness-high" id="paper_fab5" class="btHome" on-tap={{tappato}} style="top: 27%;left: 55%"></paper-fab>-->
                <paper-fab mini icon="device:brightness-high" id="paper_fab6" class="btHome" on-tap={{postolino}} style="top: 70%;left: 60%" ></paper-fab>
                <!--<paper-fab mini icon="device:brightness-high" id="paper_fab7" class="btHome" on-tap={{tappato}} style="top: 65%;left: 25%"></paper-fab>-->

                <paper-dialog id="dialog">
                    <div>
                        <div class="dialog" center horizontal layout>
                            <div>Touch sounds</div>
                            <paper-checkbox></paper-checkbox>
                        </div>
                        <div class="dialog" center horizontal layout>
                            <div> uscabau</div>
                            <paper-checkbox></paper-checkbox>
                        </div>
                    </div>
                </paper-dialog>

                <img id="house" src="../images/map-house-2-Metaform.jpeg" draggable="false" >

            </figure>
            <div style="border: 1px dotted silver;">

                <core-drag-drop></core-drag-drop>

                <div class="box" style="background-color: lightblue;" draggable="false"></div>

                <div class="box" style="background-color: orange;" draggable="false"></div>

                <div class="box" style="background-color: lightgreen;" draggable="false"></div>

            </div>

            <paper-toast id="toast" class="capsule" style="padding-right: 60px;"></paper-toast>
        </template >






    <script>
        (function () {
            var status = {
                "paper_fab2" : {status: 'off', position:"Living room light " ,action:"pin4"},
                "paper_fab3" : {status: 'off', position:"Bathroom light " ,action:"pin5"},
                "paper_fab5" : {status: 'off', position:"Bed room1 light " ,action:"pin6"},
                "paper_fab6" : {status: 'off', position:"Bed room2 light " ,action:"pin7"},
                "paper_fab4" : {status: 'off', position:"Allarm " ,action:"pin3"},
                "paper_fab7" : {status: 'off', position:"Bed room3 light " ,action:"pin8"}};

            var draginfo="";
            Polymer('bluePrint-page', {
                        ready: function () {
                            console.log('bluePrint ready');

                        },
                      

                        tappato: function (a,b,target) {
                            var id = target.id;
                            var ajax = this.$.post;
                            if (status[id].status == "on") {
                                console.log("spento");
                                this.$.toast.text = status[id].position + "off";
                                target.style.background = "#ffffff";
                                status[id].status = "off"
                                ajax.bodyType="json";
                                ajax.body='{ "ID" : "54737f184158a1bae31a551d" ,"PARAM" :  { "'+status[id].action+'": false }}';
                                ajax.go();                            

                            } else {
                                console.log("acceso");
                                this.$.toast.text = status[id].position + "on";;
                                target.style.background = "#ffeb3b";
                                status[id].status = "on";
                                ajax.bodyType="json";
                                ajax.body='{ "ID" : "54737f184158a1bae31a551d" ,"PARAM" :  { "'+status[id].action+'": true }}';
                                ajax.go();
                            }
                            this.$.toast.show();
                        },


                        tappato2: function (a,b,target) {
                            var ajax = this.$.post;
                            //var dialog = this.$.dialog.toggle();
                            if(status[id].status == "on") {
                                this.$.toast.text = status[id].position + "on";
                                ajax.bodyType = "json";
                                ajax.body = '{ "ID" : "54737f184158a1bae31a551d" ,"PARAM" :  { "' + status[id].action + '": true }}';
                                ajax.go();
                            }else{
                                this.$.toast.text = status[id].position + "on";
                                ajax.bodyType = "json";
                                ajax.body = '{ "ID" : "54737f184158a1bae31a551d" ,"PARAM" :  { "' + status[id].action + '": false }}';
                                ajax.go();
                            }
                            this.$.toast.show();


                        },
                        postolino :function(){
                            var ajax = this.$.post;
                            console.log("ftaeufaswgyfqgk");
                            ajax.body='{"msg": "canedi polymer" }';
                            ajax.go();
                        }
//


                    }

            )
        })();

    </script>

</polymer-element>